<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="CTFs HackTheBox Machines Agile" /><meta name="author" content="BatBato" /><meta property="og:locale" content="en" /><meta name="description" content="Agile - Machine [Medium]" /><meta property="og:description" content="Agile - Machine [Medium]" /><link rel="canonical" href="nouman404.github.io/CTFs/HackTheBox/Machines/Agile" /><meta property="og:url" content="nouman404.github.io/CTFs/HackTheBox/Machines/Agile" /><meta property="og:site_name" content="BatBato’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-04-19T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="CTFs HackTheBox Machines Agile" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@BatBato" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"BatBato"},"dateModified":"2023-12-29T13:25:51+01:00","datePublished":"2023-04-19T00:00:00+02:00","description":"Agile - Machine [Medium]","headline":"CTFs HackTheBox Machines Agile","mainEntityOfPage":{"@type":"WebPage","@id":"nouman404.github.io/CTFs/HackTheBox/Machines/Agile"},"url":"nouman404.github.io/CTFs/HackTheBox/Machines/Agile"}</script><title>CTFs | HackTheBox | Machines | Agile | BatBato's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="BatBato's Blog"><meta name="application-name" content="BatBato's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">BatBato's Blog</a></div><div class="site-subtitle font-italic">BatBato was here :)</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/notes/" class="nav-link"> <i class="fa-fw fas fa-sticky-note ml-xl-3 mr-xl-3 unloaded"></i> <span>NOTES</span> </a><li class="nav-item"> <a href="/sources/" class="nav-link"> <i class="fa-fw fas fa-folder-open ml-xl-3 mr-xl-3 unloaded"></i> <span>SOURCES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Nouman404" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://app.hackthebox.com/profile/235762" aria-label="hackthebox" target="_blank" rel="noopener"> <i class="fas fa-cube"></i> </a> <a href="https://tryhackme.com/p/Batbato" aria-label="tryhackme" target="_blank" rel="noopener"> <i class="fas fa-cloud"></i> </a> <a href="https://www.root-me.org/BatBato" aria-label="rootme" target="_blank" rel="noopener"> <i class="fas fa-skull"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>CTFs | HackTheBox | Machines | Agile</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>CTFs | HackTheBox | Machines | Agile</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1681855200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 19, 2023 </em> </span> <span> Updated <em class="" data-ts="1703852751" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 29, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> Bat </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1196 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><h1 id="agile---machine-medium">Agile - Machine [Medium]</h1><p>Hello there. Today, we are going to look at the Agile room. This was my first medium and I took a lot of time on the foothold for some unknown reason :).</p><h2 id="port-enumeration"><span class="mr-2">Port Enumeration</span><a href="#port-enumeration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We first launch a Nmap on the machine and as we can see we have a redirection to <a href="http://superpass.htb">http://superpass.htb</a>. So we add it to our <code class="language-plaintext highlighter-rouge">/etc/hosts</code> file.</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233036782-664de8cc-3677-4915-b6bf-7d644fb27a63.png" alt="image" data-proofer-ignore></p><h2 id="web-enumeration"><span class="mr-2">Web Enumeration</span><a href="#web-enumeration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>When accessing the website for the first time we notice nothing strange. It’s just a basic website.</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233037256-099039a1-8b25-40a0-8b9b-c4733072ec91.png" alt="image" data-proofer-ignore></p><p>We try to create an account to see what happen and we then can log in with our newly created user. When doing some action on the website as register, login, export… We may encounter server errors like the following:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233037680-b2c607fb-553f-450d-9969-d72559768a3f.png" alt="image" data-proofer-ignore></p><p>This allows us to know that this run a Flask app in <code class="language-plaintext highlighter-rouge">wsgi_app</code>:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233037952-340d5c64-b91b-4e8a-8819-75990a0963b6.png" alt="image" data-proofer-ignore></p><p>We notice that there are two main paths. The first one is the Flask path and the other one is the app folder:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233038395-78068a2e-241e-4b87-aba6-cedd8d95f261.png" alt="image" data-proofer-ignore></p><p>This will come in handy later.</p><p>When we connect to the website, we see that it’s basically just a password vault. We can add a user and a website and the password will be automatically generated:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233039432-8586dbe8-b0b7-49cd-b0bb-0faa03c5363a.png" alt="image" data-proofer-ignore></p><p>When we try to export it, a <code class="language-plaintext highlighter-rouge">.csv</code> file is generated. We try to intercept the command in BurpSuite and… We can see that a request is made at <code class="language-plaintext highlighter-rouge">/download?fn=a_export_bec55b6381.csv</code> to download a <code class="language-plaintext highlighter-rouge">.csv</code> file of the format <code class="language-plaintext highlighter-rouge">USER_export_RANDOMCHAR.csv</code></p><p><img data-src="https://user-images.githubusercontent.com/73934639/233040151-1aeb9ce0-47fe-49e1-b035-0cc23d2957dc.png" alt="image" data-proofer-ignore></p><p>Another request is then made to the download page stating that the debugger is up:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233041048-a8b2a94b-184c-472a-abfa-7483e45f6789.png" alt="image" data-proofer-ignore></p><h2 id="lfi"><span class="mr-2">LFI</span><a href="#lfi" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We may want to try some basic LFI and access the <code class="language-plaintext highlighter-rouge">/etc/passwd</code> file:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233041468-27bf845d-effc-4508-be8e-2ede8cd87dbe.png" alt="image" data-proofer-ignore></p><p>And voilà, we can download any file we want on the machine:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233041559-434b1b41-1c14-4807-9c7d-b5f4d196dfaa.png" alt="image" data-proofer-ignore></p><p>Now that we can download any file we want, why not downloading the ones from the website to see if we can find any interesting information. We saw earlier that there was a file that may contain valuable information in <code class="language-plaintext highlighter-rouge">/app/app/superpass/app.py</code> and we find a debug function:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233043980-1232d699-1f57-4f8b-a0e9-aff3f6d58b32.png" alt="image" data-proofer-ignore></p><h2 id="pin-generator"><span class="mr-2">PIN Generator</span><a href="#pin-generator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Looking for <code class="language-plaintext highlighter-rouge">Flask debugger vulnerabilities</code> on the internet we find a useful link from <a href="https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/werkzeug">hacktricks</a> talking about a console that may allow us to get a RCE, but unfortunately, it is not available at <code class="language-plaintext highlighter-rouge">/console</code>. But if we are careful enough, we can see that there is a small console icon when we are on an error page:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233046011-cdf4bbb9-49c1-4f28-95f4-eebf3ddb37f1.png" alt="image" data-proofer-ignore></p><p>We can click on it but it will ask us for the PIN, that we don’t have…Yet. So basically we need to retrieve all this information:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233046322-b34c7a57-399a-4a8d-b8f9-9ede2fdad4da.png" alt="image" data-proofer-ignore></p><p>The HackTrick article states that we need to find the user running the app, the value returned by <code class="language-plaintext highlighter-rouge">getattr(app, '__name__', getattr (app .__ class__, '__name__'))</code> and the one returned by <code class="language-plaintext highlighter-rouge">getattr(mod, '__file__', None)</code> that is the absolute path of app.py.</p><p>We already found the app name <code class="language-plaintext highlighter-rouge">wsgi_app</code> and the path of the app.py is <code class="language-plaintext highlighter-rouge">/app/venv/lib/python3.10/site-packages/flask/app.py</code>. So now we need to find the user running the app.</p><p>We find the website <a href="https://www.bengrewell.com/cracking-flask-werkzeug-console-pin/">Bangrewell</a> that gives us much more information about how the PIN is generated and how to generate it (which is what we want to do :) ).</p><p>The article states that we can find the user running the app in the <code class="language-plaintext highlighter-rouge">/proc/self/environ</code> file. And after downloading it, we find the user <code class="language-plaintext highlighter-rouge">www-data</code>:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233048722-dcc4e552-f3a5-4a04-869e-7d15c89a520a.png" alt="image" data-proofer-ignore></p><p>We can be sure that it is the right user when downloading the <code class="language-plaintext highlighter-rouge">/proc/self/status</code> file and see the <code class="language-plaintext highlighter-rouge">UID</code> of that user:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233048939-c56ba876-3a56-4472-9710-43d9206d1f2f.png" alt="image" data-proofer-ignore></p><p>Now we just need to find the <code class="language-plaintext highlighter-rouge">private_bits</code> part. We’ve seen that the first value is generated with the <code class="language-plaintext highlighter-rouge">str(uuid.getnode())</code> function. This is the MAC address of the machine that is converted as an integer. I first tried with the MAC address in the <code class="language-plaintext highlighter-rouge">/proc/net/arp</code> but it didn’t work. I then tried with the one of the <code class="language-plaintext highlighter-rouge">eth0</code> interface available in the <code class="language-plaintext highlighter-rouge">/sys/class/net/eth0/address</code> file. We then convert it as an INT with python:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233050395-a4fa9e86-9d13-44ab-a051-be64bfc25418.png" alt="image" data-proofer-ignore></p><p>We now need to recover the second value of the <code class="language-plaintext highlighter-rouge">private_bits</code>. Following the <a href="https://www.bengrewell.com/cracking-flask-werkzeug-console-pin/">Bengrewell</a> steps, we download the <code class="language-plaintext highlighter-rouge">/etc/machine-id</code> file and the <code class="language-plaintext highlighter-rouge">/proc/self/cgroup</code> and we recover the machine id and the cgroup value <code class="language-plaintext highlighter-rouge">superpass.service</code>.</p><blockquote class="prompt-danger"><div><p>/!\ WARNING /!\ The machine id may change! So be sure to recover the new one when you restart your machine.</p></div></blockquote><p>We can now run our exploit and recover the PIN:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233052192-fa4b5c88-b90a-46e0-a635-5740271518d4.png" alt="image" data-proofer-ignore></p><blockquote class="prompt-info"><div><p>The exploit code is available <a href="https://github.com/Nouman404/nouman404.github.io/blob/main/_posts/CTFs/HackTheBox/Machines/Agile/exploit.py">here</a> if you want but I advise you to create it from scratch with the help of the HackTrick and Bengrewell blog in addition with the source code that you downloaded.</p></div></blockquote><h2 id="rce"><span class="mr-2">RCE</span><a href="#rce" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Now that we have access to the console, we may want to run command in it.</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233053433-46741d17-cd2c-4742-a421-eaacb33771e6.png" alt="image" data-proofer-ignore></p><p>We try to recover a reverse shell. I used pearl:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233053839-b39904f2-c296-484f-85b1-12cc5ccbbf08.png" alt="image" data-proofer-ignore></p><blockquote class="prompt-tip"><div><p>You can stabilise your shell with the command <code class="language-plaintext highlighter-rouge">python3 -c 'import pty;pty.spawn("/bin/bash")';export TERM=xterm</code> (here we have python3 not python2). Then press <code class="language-plaintext highlighter-rouge">CTRL+Z</code> and type <code class="language-plaintext highlighter-rouge">stty raw -echo; fg</code>. If nothing is printed out press <code class="language-plaintext highlighter-rouge">ENTER</code> and you will get a full shell with autocompletion.</p></div></blockquote><h2 id="horizontal-privesc"><span class="mr-2">Horizontal PrivEsc</span><a href="#horizontal-privesc" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you remember, we downloaded the file <code class="language-plaintext highlighter-rouge">/proc/self/environ</code> and we found the user with it. But in this file, there was also a configuration file:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233055002-87eee3b9-9ebc-4bc7-9b5b-2b5a0127298a.png" alt="image" data-proofer-ignore></p><p>We can see that there is an SQL username and password to the <code class="language-plaintext highlighter-rouge">superpass</code> database: <img data-src="https://user-images.githubusercontent.com/73934639/233055163-840709f1-b1e9-4a55-8c06-7be036b4f064.png" alt="image" data-proofer-ignore></p><p>We can now connect to it and see that there is a password table:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233055543-d6d83e49-b21d-43ba-96fb-077bfb6f65f5.png" alt="image" data-proofer-ignore></p><p>We can recover the <code class="language-plaintext highlighter-rouge">corum</code> password for the machine (Agile) and connect via SSH to have a real shell:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233055812-de1c22c3-e862-4121-b1ec-966f6550656f.png" alt="image" data-proofer-ignore></p><p>We recover the flag:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233056104-735d5faa-42f8-465c-a9e4-2be383917990.png" alt="image" data-proofer-ignore></p><p>We can’t run anything via <code class="language-plaintext highlighter-rouge">sudo</code>, after looking around, I launched Linpeas and we find an interesting process:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233056347-257518a7-d7a6-4ac3-9aea-3513ddb438d7.png" alt="image" data-proofer-ignore></p><p>As we can see, it runs on a local port:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233056646-222a818f-5b8c-4002-9036-6a258e8618b7.png" alt="image" data-proofer-ignore></p><p>So we upload chisel on the machine to be able to look at it on our machine:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233058415-8c33588d-4b9e-4a1e-b00f-27d9a2f8f56d.png" alt="image" data-proofer-ignore></p><p>Now, because it’s a chrome headless browser, we need to open chrome and configure the <code class="language-plaintext highlighter-rouge">Discover network targets</code> to be able to get the website on the forwarded port (here 41829):</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233058754-91b68dcf-9e19-4e7f-ac45-54647554f55e.png" alt="image" data-proofer-ignore></p><p>Now add the following line and click on “Done”:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233059064-145222fb-9516-4f33-85a3-06993f13f949.png" alt="image" data-proofer-ignore></p><p>You now need to add the <code class="language-plaintext highlighter-rouge">test.superpass.htb</code> to your <code class="language-plaintext highlighter-rouge">/etc/hosts</code> and put as its IP <code class="language-plaintext highlighter-rouge">localhost</code>. This ccould be found from the hosts file on the server or reading the linpeas report.</p><p>You should see the following appearing. Click on <code class="language-plaintext highlighter-rouge">inspect</code> to get a visual on the webpage:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233059761-aa509060-1465-4b25-a13b-514971a7f05a.png" alt="image" data-proofer-ignore></p><p>Now go to the vault option, and you should see the password for the <code class="language-plaintext highlighter-rouge">edwards</code> user:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233060440-8f91b453-287e-468a-8660-41fd0c1cf9b3.png" alt="image" data-proofer-ignore></p><h2 id="vertical-privesc"><span class="mr-2">Vertical PrivEsc</span><a href="#vertical-privesc" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>As <code class="language-plaintext highlighter-rouge">edwards</code> we are allowed to run the sudoedit command on two files as the user <code class="language-plaintext highlighter-rouge">dev_admin</code>:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233060583-f8d1652c-696a-4da5-9c67-51f64374f1cc.png" alt="image" data-proofer-ignore></p><p>When looking at what the user <code class="language-plaintext highlighter-rouge">dev_admin</code> has access to, we find the following:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233128517-b78d2f34-4151-4a6f-8685-13b1cd4ed9de.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/73934639/233128440-6f43f3a8-9bad-4ab7-9405-3463850a5cd3.png" alt="image" data-proofer-ignore></p><p>So we can see that there is a binary on the virtual environment called <code class="language-plaintext highlighter-rouge">activate</code>. Looking at all processes either with the Linpeas dump but preferably with PsPy, we can see that it is executed by the root:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233132233-c9dbd52f-2aee-4579-a2bd-13c4c6c76695.png" alt="image" data-proofer-ignore></p><p>We find a recent CVE on sudoedit that would allow us to write in a file as <code class="language-plaintext highlighter-rouge">dev_admin</code>. We find a <a href="https://medium.com/@dev.nest/how-to-bypass-sudo-exploit-cve-2023-22809-vulnerability-296ef10a1466">blog</a> explaining how to exploit this CVE-2023-22809.</p><p>First of all, we need to verify that we can write in this script <code class="language-plaintext highlighter-rouge">/app/venv/bin/activate</code> and… We do:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233132988-c3c237ed-57a8-402a-b1ed-09650e2efdb6.png" alt="image" data-proofer-ignore></p><p>So we use the following command to write in the <code class="language-plaintext highlighter-rouge">activate</code> file and put in it our reverse shell:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233133503-7d539b4f-497c-4a4e-9953-f1019bcb3367.png" alt="image" data-proofer-ignore></p><blockquote class="prompt-tip"><div><p>Note that you can use any editor you want. Nano also worked perfectly.</p></div></blockquote><p>We then put at the beginning our reverse shell:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233133750-fff471eb-732c-4d11-b140-0eb5422dbdba.png" alt="image" data-proofer-ignore></p><p>We need to quit the vi editor twice (<code class="language-plaintext highlighter-rouge">:wq</code>) and… Voilà !!!:</p><p><img data-src="https://user-images.githubusercontent.com/73934639/233133937-0a843475-2b8b-4077-b018-23e8f903e1ba.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/73934639/233134038-c7940e79-9a51-4fcc-a3a6-a4183730af26.png" alt="image" data-proofer-ignore></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ctfs/'>CTFs</a>, <a href='/categories/hackthebox/'>HackTheBox</a>, <a href='/categories/machines/'>Machines</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ctf/" class="post-tag no-text-decoration" >CTF</a> <a href="/tags/hackthebox/" class="post-tag no-text-decoration" >HackTheBox</a> <a href="/tags/machines/" class="post-tag no-text-decoration" >Machines</a> <a href="/tags/flask/" class="post-tag no-text-decoration" >Flask</a> <a href="/tags/cve/" class="post-tag no-text-decoration" >CVE</a> <a href="/tags/werkzeug/" class="post-tag no-text-decoration" >Werkzeug</a> <a href="/tags/pin/" class="post-tag no-text-decoration" >PIN</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CTFs+%7C+HackTheBox+%7C+Machines+%7C+Agile+-+BatBato%27s+Blog&url=nouman404.github.io%2FCTFs%2FHackTheBox%2FMachines%2FAgile" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CTFs+%7C+HackTheBox+%7C+Machines+%7C+Agile+-+BatBato%27s+Blog&u=nouman404.github.io%2FCTFs%2FHackTheBox%2FMachines%2FAgile" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=nouman404.github.io%2FCTFs%2FHackTheBox%2FMachines%2FAgile&text=CTFs+%7C+HackTheBox+%7C+Machines+%7C+Agile+-+BatBato%27s+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/Notes/AD/AD_Basics">Notes | AD | AD Basics</a><li><a href="/Notes/AD/Tools">Notes | AD | AD Tools</a><li><a href="/CTFs/HeroCTF_2024/Steganographie/Zipper">CTFs | HeroCTF_2024 | Steganographie | Zipper</a><li><a href="/CTFs/HeroCTF_2024/Forensique/LazySysAdmin2">CTFs | HeroCTF_2024 | Forensique | LazySysAdmin2</a><li><a href="/CTFs/HeroCTF_2024/Forensique/Tenant_trouble">CTFs | HeroCTF_2024 | Forensique | Tenant trouble</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/forensique/">Forensique</a> <a class="post-tag" href="/tags/404ctf/">404CTF</a> <a class="post-tag" href="/tags/stegano/">Stegano</a> <a class="post-tag" href="/tags/fcsc/">FCSC</a> <a class="post-tag" href="/tags/forensic/">Forensic</a> <a class="post-tag" href="/tags/osint/">OSINT</a> <a class="post-tag" href="/tags/stega/">Stega</a> <a class="post-tag" href="/tags/reverse/">Reverse</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/CTFs/HackTheBox/Machines/Precious"><div class="card-body"> <em class="small" data-ts="1682028000" data-df="ll" > Apr 21, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CTFs | HackTheBox | Machines | Precious</h3><div class="text-muted small"><p> Precious - Machine [Easy] Port Enumeration First of all… Let’s do a basic Nmap scan: As we can see, there is nothing interesting… Except the web page that is redirected to http://precious.htb/...</p></div></div></a></div><div class="card"> <a href="/CTFs/HackTheBox/Machines/Active"><div class="card-body"> <em class="small" data-ts="1689804000" data-df="ll" > Jul 20, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CTFs | HackTheBox | Machines | Active</h3><div class="text-muted small"><p> Active Enumeration First of all, we can start by running an nmap scan: The nmap scan doesn’t give much clue on what to do now, but there is an SMB share. Let’s have a look: As we can see,...</p></div></div></a></div><div class="card"> <a href="/CTFs/HackTheBox/Machines/Devel"><div class="card-body"> <em class="small" data-ts="1689804000" data-df="ll" > Jul 20, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CTFs | HackTheBox | Machines | Devel</h3><div class="text-muted small"><p> Devel Enumeration First of all, lets start a basic nmap scan: As we can see, we y have port 21 and port 80 opened. We also can notice that the port 21 (FTP) is accessible by the anonymous us...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/CTFs/vishwactf/Stegano/Quick_Heal" class="btn btn-outline-primary" prompt="Older"><p>CTFs | vishwactf | Quick_Heal</p></a> <a href="/CTFs/HackTheBox/Machines/Precious" class="btn btn-outline-primary" prompt="Newer"><p>CTFs | HackTheBox | Machines | Precious</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/Nouman404/">Bat</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/forensique/">Forensique</a> <a class="post-tag" href="/tags/404ctf/">404CTF</a> <a class="post-tag" href="/tags/stegano/">Stegano</a> <a class="post-tag" href="/tags/fcsc/">FCSC</a> <a class="post-tag" href="/tags/forensic/">Forensic</a> <a class="post-tag" href="/tags/osint/">OSINT</a> <a class="post-tag" href="/tags/stega/">Stega</a> <a class="post-tag" href="/tags/reverse/">Reverse</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
